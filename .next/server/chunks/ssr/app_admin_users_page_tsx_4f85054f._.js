module.exports=[47468,a=>{"use strict";a.s(["default",()=>C]);var b=a.i(87924),c=a.i(31626),d=a.i(72131),e=a.i(3130),f=a.i(40695),g=a.i(5522),h=a.i(17171),i=a.i(87682),j=a.i(54161),k=a.i(60246),l=a.i(15618),m=a.i(87532),n=a.i(3314),o=a.i(4416),p=a.i(86520),q=a.i(77156),r=a.i(41379),s=a.i(81560),t=a.i(17371),u=a.i(92e3),v=a.i(67453),w=a.i(62722),x=a.i(92258),y=a.i(46842),z=a.i(81402),A=a.i(21161),B=a.i(69520);function C(){let[a,C]=(0,d.useState)([]),[D,E]=(0,d.useState)(""),[F,G]=(0,d.useState)(!1),[H,I]=(0,d.useState)({email:"",firstName:"",lastName:"",role:"Moderator",password:""}),[J,K]=(0,d.useState)(null),[L,M]=(0,d.useState)(!1),[N,O]=(0,d.useState)(!1);(0,d.useEffect)(()=>{O(!0)},[]);let P=(0,d.useCallback)(async()=>{M(!0);try{let a=await fetch(`/api/admin/users?q=${encodeURIComponent(D)}`,{credentials:"include"}),b=await a.json();if(a.ok){let a=b.users.map(a=>({...a,firstName:a.first_name||a.firstName,lastName:a.last_name||a.lastName,isActive:void 0!==a.is_active?a.is_active:a.isActive,createdAt:a.created_at||a.createdAt,lastLogin:a.last_login||a.lastLogin}));C(a)}else K(b.error||"Failed to load users")}catch(a){}finally{M(!1)}},[D]);async function Q(a){K(null),M(!0);try{await new Promise(a=>setTimeout(a,1e3)),Date.now().toString(),H.email,H.firstName,H.lastName,H.role,new Date().toISOString().split("T")[0],a.preventDefault(),K(null);let b=document.cookie.split("; ").find(a=>a.startsWith("csrfToken="))?.split("=")[1]||"",c=await fetch("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json","x-csrf-token":b},credentials:"include",body:JSON.stringify(H)}),d=await c.json();if(!c.ok)return void K(d.error||"Failed");G(!1),I({email:"",firstName:"",lastName:"",role:"Moderator",password:""})}catch(a){K("Failed to create user")}finally{M(!1)}}async function R(a){M(!0);try{let b=document.cookie.split("; ").find(a=>a.startsWith("csrfToken="))?.split("=")[1]||"";await fetch("/api/admin/users",{method:"PUT",headers:{"Content-Type":"application/json","x-csrf-token":b},credentials:"include",body:JSON.stringify({id:a._id||a.id,isActive:!a.isActive})}),await P()}finally{M(!1)}}async function S(a,b){M(!0);try{let c=document.cookie.split("; ").find(a=>a.startsWith("csrfToken="))?.split("=")[1]||"",d=await fetch("/api/admin/users",{method:"PUT",headers:{"Content-Type":"application/json","x-csrf-token":c},credentials:"include",body:JSON.stringify({id:a._id||a.id,role:b})});401===d.status&&alert("Please re-authenticate for sensitive action."),await P()}finally{M(!1)}}async function T(a){let b=a.firstName||a.first_name||"Unknown",c=a.lastName||a.last_name||"User";if(confirm(`Are you sure you want to delete ${b} ${c}?`)){M(!0);try{let b=document.cookie.split("; ").find(a=>a.startsWith("csrfToken="))?.split("=")[1]||"",c=await fetch(`/api/admin/users?id=${encodeURIComponent(a._id||a.id)}`,{method:"DELETE",headers:{"x-csrf-token":b},credentials:"include"});401===c.status&&(alert("Please re-authenticate to delete."),U()),await P()}finally{M(!1)}}}async function U(){let a=prompt("Re-enter your password for confirmation");a&&((await fetch("/api/auth/reauth",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({password:a})})).ok||alert("Re-authentication failed"))}if((0,d.useEffect)(()=>{if(!N)return;let a=setTimeout(()=>{P()},300);return()=>clearTimeout(a)},[D,N,P]),!N)return null;let V=a.filter(a=>a.email.toLowerCase().includes(D.toLowerCase())||`${a.firstName||a.first_name||""} ${a.lastName||a.last_name||""}`.toLowerCase().includes(D.toLowerCase()));return(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 admin-users-page space-y-8",children:[(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 fixed inset-0 overflow-hidden pointer-events-none opacity-30",children:[(0,b.jsx)("div",{className:"jsx-185241fbbc7bde56 absolute top-20 right-10 w-32 h-32 bg-gradient-to-r from-blue-400/20 to-purple-400/20 rounded-full animate-pulse"}),(0,b.jsx)("div",{style:{animationDuration:"3s"},className:"jsx-185241fbbc7bde56 absolute bottom-20 left-10 w-24 h-24 bg-gradient-to-r from-emerald-400/20 to-teal-400/20 rounded-full animate-bounce"})]}),(0,b.jsx)("div",{className:"jsx-185241fbbc7bde56 relative z-10 backdrop-blur-md bg-white/80 dark:bg-slate-800/80 rounded-2xl p-6 shadow-2xl border border-white/20",children:(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 flex items-center space-x-4",children:[(0,b.jsx)("div",{className:"jsx-185241fbbc7bde56 p-3 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl shadow-lg",children:(0,b.jsx)(k.Users,{className:"h-8 w-8 text-white"})}),(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56",children:[(0,b.jsx)("h1",{className:"jsx-185241fbbc7bde56 text-3xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 dark:from-white dark:to-slate-300 bg-clip-text text-transparent",children:"User Management"}),(0,b.jsx)("p",{className:"jsx-185241fbbc7bde56 text-slate-600 dark:text-slate-400 mt-1",children:"Manage users, roles, and permissions"})]})]}),(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 flex items-center space-x-3",children:[(0,b.jsxs)(j.Badge,{className:"bg-gradient-to-r from-emerald-500 to-teal-500 text-white border-0",children:[V.length," Users"]}),(0,b.jsxs)(f.Button,{onClick:()=>G(!F),className:`${F?"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600":"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600"} text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105`,children:[F?(0,b.jsx)(w.XCircle,{className:"h-5 w-5 mr-2"}):(0,b.jsx)(l.Plus,{className:"h-5 w-5 mr-2"}),F?"Cancel":"New User"]})]})]})}),F&&(0,b.jsxs)(e.Card,{className:"backdrop-blur-md bg-white/80 dark:bg-slate-800/80 border-0 shadow-2xl rounded-2xl overflow-hidden",style:{animation:"slideDown 0.5s ease-out"},children:[(0,b.jsx)("div",{className:"jsx-185241fbbc7bde56 absolute inset-0 bg-gradient-to-r from-blue-500/5 via-purple-500/5 to-pink-500/5"}),(0,b.jsx)(e.CardHeader,{className:"relative z-10 bg-gradient-to-r from-slate-50 to-blue-50 dark:from-slate-800 dark:to-slate-700 border-b border-slate-200/50 dark:border-slate-600/50",children:(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 flex items-center space-x-3",children:[(0,b.jsx)("div",{className:"jsx-185241fbbc7bde56 p-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg shadow-lg",children:(0,b.jsx)(t.UserPlus,{className:"h-5 w-5 text-white"})}),(0,b.jsx)(e.CardTitle,{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Create New User"})]})}),(0,b.jsx)(e.CardContent,{className:"relative z-10 p-6",children:(0,b.jsxs)("div",{onSubmit:Q,className:"jsx-185241fbbc7bde56 grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 space-y-3 md:col-span-2",children:[(0,b.jsxs)(h.Label,{className:"flex items-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:[(0,b.jsx)(x.Mail,{className:"h-4 w-4 mr-2"}),"Email Address"]}),(0,b.jsx)(g.Input,{value:H.email,onChange:a=>I({...H,email:a.target.value}),className:"h-12 bg-white/60 dark:bg-slate-700/60 border-slate-200 dark:border-slate-600 rounded-xl",placeholder:"user@example.com",required:!0})]}),(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 space-y-3",children:[(0,b.jsxs)(h.Label,{className:"flex items-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:[(0,b.jsx)(y.User,{className:"h-4 w-4 mr-2"}),"First Name"]}),(0,b.jsx)(g.Input,{value:H.firstName,onChange:a=>I({...H,firstName:a.target.value}),className:"h-12 bg-white/60 dark:bg-slate-700/60 border-slate-200 dark:border-slate-600 rounded-xl",placeholder:"John",required:!0})]}),(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 space-y-3",children:[(0,b.jsxs)(h.Label,{className:"flex items-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:[(0,b.jsx)(y.User,{className:"h-4 w-4 mr-2"}),"Last Name"]}),(0,b.jsx)(g.Input,{value:H.lastName,onChange:a=>I({...H,lastName:a.target.value}),className:"h-12 bg-white/60 dark:bg-slate-700/60 border-slate-200 dark:border-slate-600 rounded-xl",placeholder:"Doe",required:!0})]}),(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 space-y-3",children:[(0,b.jsxs)(h.Label,{className:"flex items-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:[(0,b.jsx)(A.Settings,{className:"h-4 w-4 mr-2"}),"Role"]}),(0,b.jsxs)(i.Select,{value:H.role,onValueChange:a=>I({...H,role:a}),children:[(0,b.jsx)(i.SelectTrigger,{className:"h-12 bg-white/60 dark:bg-slate-700/60 border-slate-200 dark:border-slate-600 rounded-xl",children:(0,b.jsx)(i.SelectValue,{placeholder:"Select role"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"Moderator",children:"Moderator"}),(0,b.jsx)(i.SelectItem,{value:"Admin",children:"Admin"}),(0,b.jsx)(i.SelectItem,{value:"SuperAdmin",children:"SuperAdmin"})]})]})]}),(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 space-y-3 md:col-span-2",children:[(0,b.jsxs)(h.Label,{className:"flex items-center text-sm font-semibold text-slate-700 dark:text-slate-300",children:[(0,b.jsx)(z.Key,{className:"h-4 w-4 mr-2"}),"Temporary Password"]}),(0,b.jsx)(g.Input,{type:"password",value:H.password,onChange:a=>I({...H,password:a.target.value}),className:"h-12 bg-white/60 dark:bg-slate-700/60 border-slate-200 dark:border-slate-600 rounded-xl",placeholder:"Enter secure password",required:!0}),(0,b.jsxs)("p",{className:"jsx-185241fbbc7bde56 text-xs text-slate-500 dark:text-slate-400 flex items-center",children:[(0,b.jsx)(u.AlertCircle,{className:"h-3 w-3 mr-1"}),"Minimum 12 characters with uppercase, lowercase, number, and special character."]})]}),J&&(0,b.jsx)("div",{className:"jsx-185241fbbc7bde56 md:col-span-2 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:(0,b.jsxs)("p",{className:"jsx-185241fbbc7bde56 text-sm text-red-600 dark:text-red-400 flex items-center",children:[(0,b.jsx)(w.XCircle,{className:"h-4 w-4 mr-2"}),J]})}),(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 md:col-span-2 flex justify-end space-x-3",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>G(!1),className:"px-6",children:"Cancel"}),(0,b.jsxs)(f.Button,{onClick:Q,disabled:L,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white border-0 shadow-lg px-6",children:[L?(0,b.jsx)(B.RefreshCw,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(v.CheckCircle2,{className:"h-4 w-4 mr-2"}),"Create User"]})]})]})})]}),(0,b.jsx)(e.Card,{className:"backdrop-blur-md bg-white/80 dark:bg-slate-800/80 border-0 shadow-lg rounded-xl",children:(0,b.jsx)(e.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 flex-1 relative",children:[(0,b.jsx)(m.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),(0,b.jsx)(g.Input,{placeholder:"Search by email or name...",value:D,onChange:a=>E(a.target.value),className:"pl-10 h-11 bg-white/60 dark:bg-slate-700/60 border-slate-200 dark:border-slate-600 rounded-xl"})]}),(0,b.jsx)(f.Button,{onClick:P,disabled:L,className:"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white border-0 shadow-lg px-6",children:L?(0,b.jsx)(B.RefreshCw,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(m.Search,{className:"h-4 w-4"})})]})})}),(0,b.jsx)("div",{className:"jsx-185241fbbc7bde56 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:V.map((a,c)=>(0,b.jsxs)(e.Card,{className:"group backdrop-blur-md bg-white/80 dark:bg-slate-800/80 border-0 shadow-lg hover:shadow-2xl rounded-xl overflow-hidden transition-all duration-300 transform hover:scale-105 hover:-translate-y-2",style:{animationDelay:`${.1*c}s`,animation:N?"fadeInUp 0.6s ease-out forwards":"none"},children:[(0,b.jsx)("div",{className:"jsx-185241fbbc7bde56 absolute inset-0 bg-gradient-to-br from-slate-50/50 to-blue-50/50 dark:from-slate-800/50 dark:to-slate-700/50"}),(0,b.jsx)(e.CardHeader,{className:"relative z-10 pb-3",children:(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 flex items-center space-x-3",children:[(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg",children:[(a.firstName||a.first_name||"U").charAt(0),(a.lastName||a.last_name||"").charAt(0)]}),(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56",children:[(0,b.jsxs)("h3",{className:"jsx-185241fbbc7bde56 font-semibold text-slate-800 dark:text-white",children:[a.firstName||a.first_name||"Unknown"," ",a.lastName||a.last_name||"User"]}),(0,b.jsxs)("p",{className:"jsx-185241fbbc7bde56 text-sm text-slate-500 dark:text-slate-400 flex items-center",children:[(0,b.jsx)(x.Mail,{className:"h-3 w-3 mr-1"}),a.email]})]})]}),(0,b.jsx)(j.Badge,{className:`bg-gradient-to-r ${a.isActive?"from-emerald-500 to-teal-500":"from-red-500 to-pink-500"} text-white border-0 text-xs`,children:a.isActive?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.CheckCircle2,{className:"h-3 w-3 mr-1"}),"Active"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(w.XCircle,{className:"h-3 w-3 mr-1"}),"Suspended"]})})]})}),(0,b.jsx)(e.CardContent,{className:"relative z-10 pt-0",children:(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 space-y-4",children:[(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 flex items-center justify-between",children:[(0,b.jsxs)(j.Badge,{className:`bg-gradient-to-r ${function(a){switch(a){case"SuperAdmin":return"from-amber-500 to-orange-500";case"Admin":return"from-blue-500 to-indigo-500";default:return"from-emerald-500 to-teal-500"}}(a.role)} text-white border-0 flex items-center`,children:[function(a){switch(a){case"SuperAdmin":return(0,b.jsx)(p.Crown,{className:"h-4 w-4"});case"Admin":return(0,b.jsx)(o.ShieldCheck,{className:"h-4 w-4"});default:return(0,b.jsx)(n.Shield,{className:"h-4 w-4"})}}(a.role),(0,b.jsx)("span",{className:"jsx-185241fbbc7bde56 ml-1",children:a.role})]}),(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 text-xs text-slate-500 dark:text-slate-400",children:["Joined ",a.createdAt]})]}),(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 space-y-2",children:[(0,b.jsx)(h.Label,{className:"text-xs font-semibold text-slate-600 dark:text-slate-400",children:"Change Role"}),(0,b.jsxs)(i.Select,{defaultValue:a.role,onValueChange:b=>S(a,b),children:[(0,b.jsx)(i.SelectTrigger,{className:"h-9 bg-white/60 dark:bg-slate-700/60 border-slate-200 dark:border-slate-600 rounded-lg text-xs",children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"Moderator",children:"Moderator"}),(0,b.jsx)(i.SelectItem,{value:"Admin",children:"Admin"}),(0,b.jsx)(i.SelectItem,{value:"SuperAdmin",children:"SuperAdmin"})]})]})]}),(0,b.jsxs)("div",{className:"jsx-185241fbbc7bde56 flex space-x-2 pt-2",children:[(0,b.jsx)(f.Button,{size:"sm",variant:"outline",onClick:()=>R(a),className:"flex-1 h-8 text-xs border-slate-200 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700",children:a.isActive?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r.EyeOff,{className:"h-3 w-3 mr-1"}),"Suspend"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q.Eye,{className:"h-3 w-3 mr-1"}),"Activate"]})}),(0,b.jsx)(f.Button,{size:"sm",variant:"destructive",onClick:()=>T(a),className:"h-8 text-xs bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 border-0",children:(0,b.jsx)(s.Trash2,{className:"h-3 w-3"})})]})]})})]},c))}),0===V.length&&(0,b.jsx)(e.Card,{className:"backdrop-blur-md bg-white/80 dark:bg-slate-800/80 border-0 shadow-lg rounded-xl",children:(0,b.jsxs)(e.CardContent,{className:"py-16 text-center",children:[(0,b.jsx)("div",{className:"jsx-185241fbbc7bde56 w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-slate-200 to-slate-300 dark:from-slate-600 dark:to-slate-700 rounded-full flex items-center justify-center",children:(0,b.jsx)(k.Users,{className:"h-8 w-8 text-slate-500 dark:text-slate-400"})}),(0,b.jsx)("h3",{className:"jsx-185241fbbc7bde56 text-lg font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"No Users Found"}),(0,b.jsx)("p",{className:"jsx-185241fbbc7bde56 text-slate-500 dark:text-slate-400",children:"Try adjusting your search criteria or create a new user."})]})}),(0,b.jsx)(c.default,{id:"185241fbbc7bde56",children:".admin-users-page.jsx-185241fbbc7bde56{font-size:1.6rem}.admin-users-page.jsx-185241fbbc7bde56 .jsx-185241fbbc7bde56{font-size:inherit}.admin-users-page.jsx-185241fbbc7bde56 .text-xs.jsx-185241fbbc7bde56{font-size:1.2rem}.admin-users-page.jsx-185241fbbc7bde56 .text-sm.jsx-185241fbbc7bde56{font-size:1.4rem}.admin-users-page.jsx-185241fbbc7bde56 .text-base.jsx-185241fbbc7bde56{font-size:1.6rem}.admin-users-page.jsx-185241fbbc7bde56 .text-lg.jsx-185241fbbc7bde56{font-size:1.8rem}.admin-users-page.jsx-185241fbbc7bde56 .text-xl.jsx-185241fbbc7bde56{font-size:2rem}.admin-users-page.jsx-185241fbbc7bde56 .text-2xl.jsx-185241fbbc7bde56{font-size:2.4rem}.admin-users-page.jsx-185241fbbc7bde56 .text-3xl.jsx-185241fbbc7bde56{font-size:3rem}@keyframes fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"})]})}}];

//# sourceMappingURL=app_admin_users_page_tsx_4f85054f._.js.map